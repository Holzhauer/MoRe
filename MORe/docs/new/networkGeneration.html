<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Apr 17, 2014 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>More - Managing ongoing Relationships - MoRe</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
      <meta name="author" content="Sascha Holzhauer" />
    <meta name="Date-Creation-yyyymmdd" content="20140417" />
    <meta name="Date-Revision-yyyymmdd" content="20140417" />
    <meta http-equiv="Content-Language" content="en" />
        
  </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                                                <img src="images/more-logo.png" alt="$alt" />
                </div>
                        <a href="http://www.cesr.de" id="bannerRight">
                                                <img src="images/cesr-logo.gif" alt="$alt" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                
                  <div class="xright">                    <a href="http://repast.sourceforge.net/" class="externalLink" title="Repast Simphony">Repast Simphony</a>
            |
                        <a href="http://www.essa.eu.org/" class="externalLink" title="European Social Simulation Association">European Social Simulation Association</a>
            |
                        <a href="http://www.openabm.org" class="externalLink" title="OpenABM">OpenABM</a>
              
                
                &nbsp;| <span id="publishDate">Last Published: 2014-04-17</span>
              &nbsp;| <span id="projectVersion">Version: 0.86</span>
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                
                                <h5>MoRe</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="concept.html" title="Concept">Concept</a>
            </li>
                  <li class="none">
                          <a href="features.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="changes.html" title="Changes">Changes</a>
            </li>
                  <li class="none">
                          <a href="https://sourceforge.net/projects/more4abm/files" class="externalLink" title="Downloads">Downloads</a>
            </li>
                  <li class="none">
                          <a href="../apidocs/index.html" target="new" title="JavaDoc">JavaDoc</a>
            </li>
                  <li class="none">
                          <a href="https://sourceforge.net/p/more4abm/code" class="externalLink" title="Source code">Source code</a>
            </li>
                  <li class="none">
                          <a href="faq.html" title="FAQ">FAQ</a>
            </li>
                  <li class="none">
                          <a href="https://sourceforge.net/p/more4abm/tickets" class="externalLink" title="Tickets">Tickets</a>
            </li>
                  <li class="none">
                          <a href="https://sourceforge.net/p/more4abm/mailman" class="externalLink" title="Mailing lists">Mailing lists</a>
            </li>
          </ul>
                       <h5>Usage</h5>
                  <ul>
                  <li class="none">
                          <a href="usage.html" title="General">General</a>
            </li>
                  <li class="none">
            <strong>Network Generation</strong>
          </li>
                  <li class="none">
                          <a href="networkProcessors.html" title="Network Processors">Network Processors</a>
            </li>
                  <li class="none">
                          <a href="geographies.html" title="Geographies">Geographies</a>
            </li>
          </ul>
                       <h5>Related Projects</h5>
                  <ul>
                  <li class="none">
                          <a href="http://parma.sourceforge.net" class="externalLink" target="new" title="ParMa">ParMa</a>
            </li>
                  <li class="none">
                          <a href="http://uranus4abm.sourceforge.net" class="externalLink" target="new" title="URaNuS">URaNuS</a>
            </li>
                  <li class="none">
                          <a href="http://sesamgim.sourceforge.net" class="externalLink" target="new" title="SesamGIM">SesamGIM</a>
            </li>
                  <li class="none">
                          <a href="http://lara-framework.sourceforge.net" class="externalLink" target="new" title="LARA">LARA</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                              <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <ul><li><a href="#Using_Network_Generators">Using Network Generators</a><ul><li><a href="#Network_Generator_Classes">Network Generator Classes</a></li><li><a href="#Recycling_of_Network_Configurations">Recycling of Network Configurations</a></li><li><a href="#Adding_and_Removal_of_Edges">Adding and Removal of Edges</a></li><li><a href="#Homophily-based_Distance_Depending_Forest_Fire_Network_Service">Homophily-based Distance Depending Forest Fire Network Service</a><ul><li><a href="#Algorithm">Algorithm</a></li><li><a href="#Creating_Hexagon_Shapefiles">Creating Hexagon Shapefiles</a></li></ul></li></ul></li><li><a href="#Implementing_Network_Builders">Implementing Network Builders</a></li></ul><div class="section"><h2>Using Network Generators<a name="Using_Network_Generators"></a></h2><div class="section"><h3>Network Generator Classes<a name="Network_Generator_Classes"></a></h3><img src="./res/NetworkGeneratorClasses.jpg" alt="Network Generator UML Class Diagram" /></div><div class="section"><h3>Recycling of Network Configurations<a name="Recycling_of_Network_Configurations"></a></h3><p>Often, especially for sensitivity analysis, simulations are conducted many times and only one or a few parameters are changed meaning the networks stays constant. Then, especially for resource consuming network builders it is a good idea to generate the network once and store it. MoRe provides suitable features:</p><p>Typically, the GRAPHML file is also produced by MoRe using <a href="../apidocs/de/cesr/more/util/io/MoreIoUtilities.html"><tt>MoreIoUtilities#outputGraph()</tt></a></p><p>For details, see JavaDoc of <a href="../apidocs/de/cesr/more/rs/building/MGeoRsRestoreNetworkBuilder.html"> <tt>MGeoRsRestoreNetworkBuilder</tt></a>. The test class <a href="../apidocs/de/cesr/more/testing/rs/building/geo/MGeoRsRestoreNetworkBuilderTest.html"><tt>MGeoRsRestoreNetworkBuilderTest</tt></a> contains a complete example.</p><p>The builder implements <tt>MoreGeoNetworkBuilder</tt> in order to substitute such network builders. However, it can also be used to restore networks for agents that are not geographically rooted.</p></div><div class="section"><h3>Adding and Removal of Edges<a name="Adding_and_Removal_of_Edges"></a></h3><p>Network generators that support addition and removal of edges extend <a href="../apidocs/de/cesr/more/manipulate/edge/MoreNetworkEdgeModifier.html"><tt>MoreNetworkEdgeModifier</tt></a>. Implementations often depend on the target system like Repast Simphony (<a href="../apidocs/de/cesr/more/rs/building/MGeoRsNetworkEdgeModifier.html"><tt>MGeoRsNetworkEdgeModifier</tt></a>). Example: <tt>MBaselineDhhRadiusNetworkBuilder</tt> extends <tt>MGeoRsNetworkService</tt>, which uses a <tt>MGeoRsNetworkEdgeModifier</tt>.</p><p>Often, the method <tt>addAndLinkNode</tt> needs to specified by the network generator by themselves since the way a node is linked a network is not general (e.g. <tt>MBaselineDhhRadiusNetworkBuilder</tt>). The <tt>MoreNetworkEdgeModifier</tt> can be used in these implementations.</p><p>NetworkService classes usually combine the <tt>MoreNetworkBuilder</tt> and the <tt>MoreNetworkModifier</tt> interfaces.</p><p>There is an interface <tt>MoreGeoNetworkEdgeModifier</tt> for edge modifiers that support geographies. However, the user needs to take care to assign such a <tt>MoreNetworkEdgeModifier</tt> to the network generator that shall support geographies.</p><p>The component approach in network generation and manipulation is much more flexible than encapsulating all network operations within the network object. It allows using e.g. different edge modifiers as ones that have geography support only in certain contexts, for instance initialisation or for certain model configurations.</p></div><div class="section"><h3>Homophily-based Distance Depending Forest Fire Network Service<a name="Homophily-based_Distance_Depending_Forest_Fire_Network_Service"></a></h3><p>The <a href="../apidocs/de/cesr/more/rs/building/MGeoRsHomophilyDistanceFfNetworkService.html"> <tt>MGeoRsHomophilyDistanceFfNetworkService</tt></a> seeks to incorporate important features for ABM:</p><ol style="list-style-type: decimal"><li>Milieu-specific degree distributions</li><li>Milieu-specific distance distributions</li><li>Milieu-specific milieu composition preferences</li><li>Focus on modularity</li></ol><div class="section"><h4>Algorithm<a name="Algorithm"></a></h4><img src="./res/setup_init_hdff_algo.png" alt="HDFF Network Generator" /><p>Apart from the milieu composition preferences, degree and distance distributions, the algorithm considers two important parameters that allow to control the resulting networks modularity quite well:</p><dl><dt><tt>MNetBuildHdffPa#PROB_FORWARD</tt></dt><dd>While exploring an ambassador's neighbours this probability determines the likelihood that the focal agent is linked from ambassador's <b>outgoing</b> links. </dd><dt><tt>MNetBuildHdffPa#PROB_BACKWARD</tt></dt><dd>While exploring an ambassador's neighbours this probability determines the likelihood that the focal agent is linked from ambassador's <b>incoming</b> links. This seems especially important for relations of social influence. </dd></dl><p>Two more parameters are important to adjust the precision for milieu composition and distance distribution (Note that the sum of both has to be <tt>1.0</tt>):</p><dl><dt><tt>MNetBuildHdffPa#DIM_WEIGHTS_MILIEU</tt></dt><dd>Determines the weight for milieu composition preferences when calculating a link's probability. The higher the value the more accurate milieu composition preferences can be fulfilled.</dd><dt><tt>MNetBuildHdffPa#DIM_WEIGHTS_GEO</tt></dt><dd>Determines the weight for distance related link probability when calculating a link's probability. The higher the value the more accurate distance distributions can be fulfilled.</dd></dl><p>See <a href="../apidocs/de/cesr/more/rs/building/MGeoRsHomophilyDistanceFfNetworkService.html"> <tt>MGeoRsHomophilyDistanceFfNetworkService</tt></a> for a list of all relevant parameters.</p></div><div class="section"><h4>Creating Hexagon Shapefiles<a name="Creating_Hexagon_Shapefiles"></a></h4><p>Hexagon shapefiles are required to determine distances between agents. Since the size of hexagons depends on the simulation region and desired performance, often according hexagon shapefiles need to be created anew (and the filename assigned to parameter <tt>MNetBuildHdffPa#HEXAGON_SHAPEFILE</tt>:</p><p>NOTE: The hexagon shapefile must cover all agent positions and should not be much larger since it is used to calculated the area's diameter which is used to initialised the distance distributions! </p><ol style="list-style-type: decimal"><li>Download and install <a class="externalLink" href="http://www.qgis.org">QuantumGIS</a></li><li>Download and install the python plugin <a class="externalLink" href="http://michaelminn.com/linux/mmqgis/"><tt>mmqgis</tt></a></li><li>Settings &gt; Project Properties &gt; Select &quot;WTS 84 / UTM zone 32N&quot;</li><li>Choose <i>plugins</i> &gt; <i>mmqgis</i> &gt; <i>create</i> &gt; <i>Create Grid Layer</i></li><li>Select <i>Hexagon (polygon)</i> at the bottom</li><li>Adapt and use these values (here for a 1km x 1km area with 200m wide hexagons; note that the hexagon shapefile's boundary exceeds the actual area in order to cover the entire region.):<table border="0" class="bodyTable"><tr class="a"><td align="center">Left X</td><td align="center">-150</td></tr><tr class="b"><td align="center">Width</td><td align="center">1300</td></tr><tr class="a"><td align="center">Bottom Y</td><td align="center">-150</td></tr><tr class="b"><td align="center">Height</td><td align="center">1200</td></tr><tr class="a"><td align="center">H Spacing</td><td align="center">200</td></tr><tr class="b"><td align="center">V Spacing</td><td align="center">auto</td></tr></table></li><li>Make sure that the shapefile defines the correct CRS by inspecting the <tt>*.prj</tt> file (usually the plugin does not assign a CRS). If not, right-click on the layer in QGIS and save as a new file. You can choose the CRS in the &quot;Save vector layer as...&quot; dialog.</li></ol></div></div></div><div class="section"><h2>Implementing Network Builders<a name="Implementing_Network_Builders"></a></h2><p>There are several ways to implement network generators that comply with the various MoRe interfaces:</p><ul><li>The most easy way is to extends the <tt>MNetworkService</tt> class which implements both <tt>MoreNetworkBuilder</tt> and <tt>MoreNetworkService</tt>. See <tt>MCompleteNetworkGenerator</tt> for the simplest example.</li><li>To implement the <tt>MoreGeoNetworkBuilder</tt> one might extend <tt>MGeoRsNetworkService</tt>. In order to use common network generation code for the standard network builder and e.g. the RS geography version one could source out such code, as was done in <tt>MSmallWorldBetaModelNetworkGenerator</tt>.</li><li>In case you prefer to extends the standard network builder to implement the RS geogrpahy version, you could use the <tt>MGeoRsNetworkService</tt> as a component and add forwarding methods to this component.<p>To specify a general network generator as RS and/or geography network generator it is normally sufficient to</p></li><li>assign a <tt>MoreGeoNetworkEdgeModifier</tt> instead of a <tt>MoreNetworkEdgeModifier</tt></li><li>implement <tt>MoreGeoNetworkService</tt> or extend <tt>MGeoRsNetworkService</tt> and copy &amp; paste the special network generator code (since JAVA does not allow multiple inheritance).<p>Network Builders should have at least two constructors:</p></li><li>One with only <tt>MoreEdgeFactory</tt> as parameter</li><li>One with <tt>MoreEdgeFactory</tt> and <tt>String</tt> as name as parameter</li></ul></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">Copyright &#169;                   2014.
          All Rights Reserved.      
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
