<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at May 5, 2014 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>More - Managing ongoing Relationships - MoRe</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
      <meta name="author" content="Sascha Holzhauer" />
    <meta name="Date-Creation-yyyymmdd" content="20140417" />
    <meta name="Date-Revision-yyyymmdd" content="20140505" />
    <meta http-equiv="Content-Language" content="en" />
        
  </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                                                <img src="images/more-logo.png" alt="$alt" />
                </div>
                        <a href="http://www.cesr.de" id="bannerRight">
                                                <img src="images/cesr-logo.gif" alt="$alt" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                
                  <div class="xright">                    <a href="http://repast.sourceforge.net/" class="externalLink" title="Repast Simphony">Repast Simphony</a>
            |
                        <a href="http://www.essa.eu.org/" class="externalLink" title="European Social Simulation Association">European Social Simulation Association</a>
            |
                        <a href="http://www.openabm.org" class="externalLink" title="OpenABM">OpenABM</a>
              
                
                &nbsp;| <span id="publishDate">Last Published: 2014-05-05</span>
              &nbsp;| <span id="projectVersion">Version: 0.86</span>
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                
                                <h5>MoRe</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="concept.html" title="Concept">Concept</a>
            </li>
                  <li class="none">
                          <a href="features.html" title="Features">Features</a>
            </li>
                  <li class="none">
                          <a href="changes.html" title="Changes">Changes</a>
            </li>
                  <li class="none">
                          <a href="https://sourceforge.net/projects/more4abm/files" class="externalLink" title="Downloads">Downloads</a>
            </li>
                  <li class="none">
                          <a href="../apidocs/index.html" target="new" title="JavaDoc">JavaDoc</a>
            </li>
                  <li class="none">
                          <a href="https://sourceforge.net/p/more4abm/code" class="externalLink" title="Source code">Source code</a>
            </li>
                  <li class="none">
                          <a href="faq.html" title="FAQ">FAQ</a>
            </li>
                  <li class="none">
                          <a href="https://sourceforge.net/p/more4abm/tickets" class="externalLink" title="Tickets">Tickets</a>
            </li>
                  <li class="none">
                          <a href="https://sourceforge.net/p/more4abm/mailman" class="externalLink" title="Mailing lists">Mailing lists</a>
            </li>
          </ul>
                       <h5>Usage</h5>
                  <ul>
                  <li class="none">
            <strong>General</strong>
          </li>
                  <li class="none">
                          <a href="networkGeneration.html" title="Network Generation">Network Generation</a>
            </li>
                  <li class="none">
                          <a href="networkProcessors.html" title="Network Processors">Network Processors</a>
            </li>
                  <li class="none">
                          <a href="geographies.html" title="Geographies">Geographies</a>
            </li>
          </ul>
                       <h5>Related Projects</h5>
                  <ul>
                  <li class="none">
                          <a href="http://parma.sourceforge.net" class="externalLink" target="new" title="ParMa">ParMa</a>
            </li>
                  <li class="none">
                          <a href="http://uranus4abm.sourceforge.net" class="externalLink" target="new" title="URaNuS">URaNuS</a>
            </li>
                  <li class="none">
                          <a href="http://sesamgim.sourceforge.net" class="externalLink" target="new" title="SesamGIM">SesamGIM</a>
            </li>
                  <li class="none">
                          <a href="http://lara-framework.sourceforge.net" class="externalLink" target="new" title="LARA">LARA</a>
            </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>MORe Usage<a name="MORe_Usage"></a></h2><ul><li><a href="#Installation">Installation</a></li><li><a href="#Quick_Start_for_Repast_Simphony_models">Quick Start for Repast Simphony models</a></li><li><a href="#Initialising_MoRe">Initialising MoRe</a><ul><li><a href="#Using_Logging">Using Logging</a></li><li><a href="#Milieu-specific_Parameters">Milieu-specific Parameters</a></li></ul></li><li><a href="#Configuring_Network_Measures">Configuring Network Measures</a><ul><li><a href="#Adding_Measure_Definitions">Adding Measure Definitions</a></li></ul></li><li><a href="#Managing_Node_Measures">Managing Node Measures</a><ul><li><a href="#Basics">Basics</a></li><li><a href="#Setting_Parameters_for_Node_Measure_Calculation">Setting Parameters for Node Measure Calculation</a></li><li><a href="#Trigger_measure_calculation_for_nodes">Trigger measure calculation for nodes</a></li><li><a href="#Node_Measure_Support">Node Measure Support</a></li></ul></li><li><a href="#Managing_Network_Measures">Managing Network Measures</a><ul><li><a href="#Basics">Basics</a></li><li><a href="#Trigger_measure_calculation_for_networks">Trigger measure calculation for networks</a></li><li><a href="#Setting_Parameters_for_Network_Measure_Calculation">Setting Parameters for Network Measure Calculation</a></li></ul></li><li><a href="#Defining_subnetworks">Defining subnetworks</a></li><li><a href="#Implementing_Custom_Measures">Implementing Custom Measures</a></li><li><a href="#Defining_Dynamics_of_Networks">Defining Dynamics of Networks</a><ul><li><a href="#Manipulation_Agent_Components">Manipulation Agent Components</a></li><li><a href="#Manipulating_Repast_Simphony_networks">Manipulating Repast Simphony networks</a></li></ul></li><li><a href="#Random_Numbers_in_MoRe">Random Numbers in MoRe</a></li></ul><div class="section"><h3>Installation<a name="Installation"></a></h3><ul><li>Make the java code available to your custom project code</li><li>Add the following libraries to your classpath depending on the planned usage:<table border="0" class="bodyTable"><tr class="a"><td align="left">Library</td><td align="left">Version</td><td align="center">Basic usage</td><td align="center">Geo</td><td align="center">RS</td><td align="center">HDFF</td><td align="center">Measures</td></tr><tr class="b"><td align="left"><a class="externalLink" href="https://sourceforge.net/projects/parma/files/">ParMa</a></td><td align="left">latest</td><td align="center">y</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="a"><td align="left"><a class="externalLink" href="https://sourceforge.net/projects/uranus4abm/files/">URaNuS</a></td><td align="left">latest</td><td align="center">y</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="b"><td align="left"><a class="externalLink" href="http://acs.lbl.gov/software/colt/colt-download/">Colt</a></td><td align="left">1.2</td><td align="center">y (Uranus)</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="a"><td align="left"><a class="externalLink" href="https://sourceforge.net/projects/collections/files/Collections%20%28Binary%29/4.01/">Apache Collections generic</a></td><td align="left">4.01</td><td align="center">y</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="b"><td align="left"><a class="externalLink" href="http://logging.apache.org/log4j/1.2/download.html">Log4J</a></td><td align="left">1.2.8</td><td align="center">y</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="a"><td align="left"><a class="externalLink" href="https://java.net/projects/jscience/downloads">JScience</a></td><td align="left">4.3.1</td><td align="center">?</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="b"><td align="left"><a class="externalLink" href="https://sourceforge.net/projects/jsr-108/files/Implementation/Milestone-0.01/">Units</a></td><td align="left">0.0.1</td><td align="center">?</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="a"><td align="left"><a class="externalLink" href="https://sourceforge.net/projects/javacsv/files/JavaCsv/">JavaCSV</a></td><td align="left">2.1</td><td align="center">y (Parma)</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="b"><td align="left"><a class="externalLink" href="https://sourceforge.net/projects/jung/files/jung/jung-2.0.1/">JUNG algorithms</a></td><td align="left">2.0.1</td><td align="center">y</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="a"><td align="left"><a class="externalLink" href="https://sourceforge.net/projects/jung/files/jung/jung-2.0.1/">JUNG API</a></td><td align="left">2.0.1</td><td align="center">y</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="b"><td align="left"><a class="externalLink" href="https://sourceforge.net/projects/jung/files/jung/jung-2.0.1/">JUNG Graph impl</a></td><td align="left">2.0.1</td><td align="center">y</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="a"><td align="left"><a class="externalLink" href="https://sourceforge.net/projects/jung/files/jung/jung-2.0.1/">JUNG IO</a></td><td align="left">2.0.1</td><td align="center">y</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="b"><td align="left"><a class="externalLink" href="http://www.vividsolutions.com/jts/JTSHome.htm">JTS</a></td><td align="left">1.7.1</td><td align="center"></td><td align="center">y</td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="a"><td align="left"><a class="externalLink" href="https://sourceforge.net/projects/geoapi/files/GeoAPI-3_0_0.zip/download">Geo-API</a></td><td align="left">2.1-M2</td><td align="center"></td><td align="center">y</td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="b"><td align="left"><a class="externalLink" href="https://sourceforge.net/projects/geotools/files/">GeoTools Main</a></td><td align="left">2.3.3</td><td align="center"></td><td align="center">y</td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="a"><td align="left"><a class="externalLink" href="https://sourceforge.net/projects/geotools/files/">GeoTools EPSG Wkt</a></td><td align="left">2.3.3</td><td align="center"></td><td align="center">y</td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="b"><td align="left"><a class="externalLink" href="https://sourceforge.net/projects/geotools/files/">GeoTools Referencing</a></td><td align="left">2.3.3</td><td align="center"></td><td align="center">y</td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="a"><td align="left"><a class="externalLink" href="http://www.rforge.net/JRI/files/">JRI</a></td><td align="left">0.5.1</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center">y</td></tr><tr class="b"><td align="left"><a class="externalLink" href="http://repast.sourceforge.net/download.php">Repast simphony bin and src</a></td><td align="left">2.0.1</td><td align="center"></td><td align="center"></td><td align="center">y</td><td align="center"></td><td align="center"></td></tr><tr class="a"><td align="left"><a class="externalLink" href="http://repast.sourceforge.net/download.php">SAF</a></td><td align="left">2.0.1</td><td align="center">?</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="b"><td align="left"><a class="externalLink" href="http://woodstox.codehaus.org/Download">Wstx asl</a></td><td align="left">3.2.6</td><td align="center">?</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="a"><td align="left"><a class="externalLink" href="http://dist.codehaus.org/stax/jars/">STAX API</a></td><td align="left">1.0.1</td><td align="center">?</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="b"><td align="left"><a class="externalLink" href="https://java3d.java.net/binary-builds.html">VecMath</a></td><td align="left">1.3.1</td><td align="center">?</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr class="a"><td align="left"><a class="externalLink" href="http://commons.apache.org/proper/commons-math/download_math.cgi">Commons Math3</a></td><td align="left">3.2</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center">y</td><td align="center"></td></tr></table><p>If you struggle with finding one of these libraries or getting a working version look in the <tt>libs</tt> folder of MoRe's source code</p></li><li>Set up a MySQL database in case you want to use it as parameter storage (see ParMa for further information) or to store network and/or node data.</li><li>For certain network and node measure calculations there is an efficient R implementation. In order to use these calculations You need to <a class="externalLink" href="http://cran.r-project.org/">install R</a> including a number of R packages. See the R-script <tt>installPackages4More.R</tt> in the folder <tt>config/r</tt> for instructions.</li></ul></div><div class="section"><h3>Quick Start for Repast Simphony models<a name="Quick_Start_for_Repast_Simphony_models"></a></h3><p>Adapt and call the following method from your <tt>build(context)</tt> method after initialisation of agents:</p><div class="source"><pre>// Define your social context if it is not the main context
Context&lt;YourAgent&gt; socialContext = context.getSubContext(socialContextId);

// Instantiate your edge factory in case you want to use custom edge objects.
// Otherwise, use MRepastEdge&lt;AgentType&gt; as edge type parameter and use new MRsEdgeFactory&lt;AgentType, MRepastEdge&lt;AgentType&gt;() 
MRsEdgeFactory&lt;YourAgent, YourEdge&gt; eFac = new YourEdgeFactory();

MoreRsNetworkBuilder&lt;YourAgent, YourEdge&gt; networkBuilder = new MGeoRsWattsBetaSwBuilder(eFac,
                        socialNetworkName);
MoreRsNetwork&lt;YourAgent, YourEdge&gt; network = networkBuilder.buildNetwork(agents);
socialContext.addProjection(network);

// init More
MManager.init();
MManager.setSchedule(new MRsSchedule(RunEnvironment.getInstance().getCurrentSchedule()));
// Register network at MoRe
MNetworkManager.setNetwork(network, socialNetworkName);
</pre></div></div><div class="section"><h3>Initialising MoRe<a name="Initialising_MoRe"></a></h3><p>Consider the following steps to initialise MoRe properly:</p><ul><li>Copy Your custom parameter data to the MoRe equivalents. To get an overview of used parameters in MoRe, consult the <a href="../apidocs/index.html">JavaDoc</a> and see package <tt>de.cesr.more.params</tt> for descriptions of parameters. More only defines default values in these enumerations. Further parameter retrieval must be issued in the user code. For details, see the <a class="externalLink" href="http://parma.sourceforge.net/">ParMa manual</a>. Consider especially:<ul><li><tt>MSyQLPa</tt> for database setting relevant for storing network and node data</li><li>Parameters for network builders, e.g. <tt>MNetBuildBhPa</tt> for <tt>MBaselineDhhRadiusNetworkBuilder</tt></li><li>Milieu-specific (i.e. agent type specific) parameters (see <a href="#Milieu-specific_Parameters"></a>) * Random seeds</li></ul></li><li>Call <tt>MManager.init()</tt> to initialise default random streams (according to parameter settings for random seeds, see also <a href="#Random_Numbers_in_More"></a>)).<p><b>NOTE:</b> Make sure to set up parameters before <tt>MManager.init()</tt> is called because otherwise defined parameters may not be considered during the initialisation of random number streams!</p></li></ul><div class="section"><h4>Using Logging<a name="Using_Logging"></a></h4><p>MoRe incorporates the <a class="externalLink" href="http://logging.apache.org/">Apache Log4J</a> framework. See the website for configuring the logging framework properly in order to achieve the desired output. This is especially important to get meaningful warnings and error messages. Two basic configuration file can be found in <tt>config/log4j</tt> (with specific settings mostly out-commented). Note that the configuration file needs to be within the Java classpath. </p></div><div class="section"><h4>Milieu-specific Parameters<a name="Milieu-specific_Parameters"></a></h4><div class="section"><h5>Storing in DB<a name="Storing_in_DB"></a></h5><p>The <a href="../apidocs/de/cesr/more/param/reader/MMilieuNetDataReader.html"><tt>MMilieuNetDataReader</tt></a> can be used to read milieu-specific parameters from a database (often used for generating heterogeneous, agent type specific networks). First, set according parameters in your model:</p><div class="source"><pre>PmParameterManager.setParameter(MSqlPa.TBLNAME_NET_PREFS, &quot;param_milieu_net&quot;);
PmParameterManager.setParameter(MSqlPa.TBLNAME_NET_PREFS_LINKS, &quot;param_milieu_links&quot;);

PmParameterManager.setParameter(MNetworkBuildingPa.MILIEU_NETPREFS_PARAMID, new Integer(1));
</pre></div><p>Make also sure general DB settings are set correctly (see <a href="#Initialising_MoRe"></a>). Then, call the data reader:</p><div class="source"><pre>new MMilieuNetDataReader().initParameters();
</pre></div></div><div class="section"><h5>Storing as CSV files<a name="Storing_as_CSV_files"></a></h5><p>The <a href="../apidocs/de/cesr/more/param/reader/MMilieuNetDataCsvReader.html"><tt>MMilieuNetDataCsvReader</tt></a> and <a href="../apidocs/de/cesr/more/param/reader/MMilieuNetLinkDataCsvReader.html"><tt>MMilieuNetLinkDataCsvReader</tt></a> parameter readers are able to import milieu-specific parameters from CSV files.</p><p>The first one requires parameters to be specified in the first row (header). The parameter <tt>MNetworkBuildingPa.MILIEU_NETWORK_CSV_COLUMNPREFIX</tt> defines a prefix for parameter definitions that needs to be omitted from the fully qualified classname in the header.</p><div class="source"><pre>PmParameterManager.getNewInstance pm = PmParameterManager.getNewInstance();
pm.setParam(MNetworkBuildingPa.MILIEU_NETWORK_CSV_MILIEUS, &quot;./path/to/SocialNetworkMilieuParameter.csv&quot;);
new MMilieuNetDataCsvReader(pm).initParameters();
</pre></div><p>The second reader loads milieu-specific composition preferences and may not contain a header:</p><div class="source"><pre>PmParameterManager.getNewInstance pm = PmParameterManager.getNewInstance();
pm.setParam(MNetworkBuildingPa.MILIEU_NETWORK_CSV_MILIEU_LINKS, &quot;./path/to/SocialNetworkMilieuLinksParameter.csv&quot;);
new MMilieuNetDataCsvReader(pm).initParameters();
</pre></div><p>Setting <tt>MNetworkBuildingPa.MILIEU_NETWORK_CSV_DELIMITER</tt> can be use to adjust the readers to the applied delimiter (default is ','):</p><div class="source"><pre>pm.setParam(MNetworkBuildingPa.MILIEU_NETWORK_CSV_DELIMITER, ',')
</pre></div><p>The test classes <tt>de.cesr.more.testing.param.reader.MMilieuNetDataCsvReaderTest</tt> and <tt>de.cesr.more.testing.param.reader.MMilieuNetLinkDataCsvReaderTest</tt> contain working examples. According CSV files are located at <tt>./test/res/</tt>.</p></div></div></div><div class="section"><h3>Configuring Network Measures<a name="Configuring_Network_Measures"></a></h3><p>The concept of network measures works as follows:</p><ol style="list-style-type: decimal"><li>Defining what measures (<tt>MoreMeasure</tt>) are calculated when using <tt>MNetworkMeasureManager</tt> or <tt>MNodeMeasureManager</tt>.</li><li>MoRe then calculated the measures and stores the data at the nodes (these need to implement <tt>MoreNodeMeasureSupport</tt>).</li><li>Calculated measures can be retrieved from the node objects.</li></ol><div class="section"><h4>Adding Measure Definitions<a name="Adding_Measure_Definitions"></a></h4><p>As default, the <tt>MNetworkMeasureManager</tt> imports measure definitions from <tt>MBasicNetworkMeasureSupplier</tt> (see JavaDoc for details). Further measure definitions are added by passing an instance of <tt>MoreMeasureSupplier</tt> to <tt>MNetworkMeasureManager#addMeasureSupplier(supplier)</tt>. See <a href="#Implementing_Custom_Measures">Implementing Custom Measures</a> for further instructions.</p></div></div><div class="section"><h3>Managing Node Measures<a name="Managing_Node_Measures"></a></h3><div class="section"><h4>Basics<a name="Basics"></a></h4><p>The central class for managing node measures is <a href="../apidocs/de/cesr/more/measures/node/MNodeMeasureManager.html"><tt>MNodeMeasureManager</tt></a>. To obtain an instance of the node measure manager call <tt>MNodeMeasureManager.getInstance()</tt>. However, make sure to set the schedule before:</p><div class="source"><pre>MNetworkManager.setSchedule(MoreSchedule schedule)
</pre></div><p>To use the Repast Simphony schedule (adapter from RS's <tt>ISchedule</tt> to <tt>MoreSchudule</tt>) call</p><div class="source"><pre>MNetworkMeasureManager.setSchedule(new MRsSchedule(RunEnvironment.getInstance().getCurrentSchedule()));
</pre></div></div><div class="section"><h4>Setting Parameters for Node Measure Calculation<a name="Setting_Parameters_for_Node_Measure_Calculation"></a></h4><p>Every MoreMeasure has a parameter map. The map contains key - (default)value pairs of parameters. the user may walk through the map and alter parameter values to adjust measure calculations. For instance, to set scheduling parameters: </p><div class="source"><pre>// set scheduling parameters:
Map &lt; String , Object &gt; params = new HashMap &lt; String , Object &gt;();
params.put(MNetworkMeasureManager.ParameterKeys.START.name(), new Integer(1));
int interval = (Integer) PmParameterManager.getParameter(SocNetPa.ANALYSE_NETWORKS_INTERVAL);
params.put(MNetworkMeasureManager.ParameterKeys.INTERVAL.name(), new Integer(interval));
params.put(MNetworkMeasureManager.ParameterKeys.END.name(), MScheduleParameters.END_TICK);
params.put(MNetworkMeasureManager.ParameterKeys.PRIORITY.name(), MScheduleParameters.FIRST_PRIORITY);
</pre></div><p>NOTE: It is not guaranteed that a MoreMeasure provides a non-empty map!</p></div><div class="section"><h4>Trigger measure calculation for nodes<a name="Trigger_measure_calculation_for_nodes"></a></h4><p>The params map (see above) is then passed when triggering a measure calculation:</p><div class="source"><pre>// add measures for overall network:
MNetworkMeasureManager.getInstance().addMeasureCalculation(ModelManager.SOCNET_NAME,
                MNetworkStatisticsSupplier.Short.N_STAT_AVGPATH.getName(), params);     
</pre></div></div><div class="section"><h4>Node Measure Support<a name="Node_Measure_Support"></a></h4><p>More offers features to access node measures. The agent class needs to implement the interface <tt>MoreNodeMeasureSupport</tt>:</p><div class="source"><pre>protected MNodeMeasures measures = new MNodeMeasures();
</pre></div><div class="source"><pre>        @Override
        public void setNetworkMeasureObject(
                        MoreNetwork&lt;? extends MoreNodeMeasureSupport, ?&gt; network,
                        MMeasureDescription key, Number value) {
                measures.setNetworkMeasureObject(network, key, value);
        }

        @Override
        public Number getNetworkMeasureObject(
                        MoreNetwork&lt;? extends MoreNodeMeasureSupport, ?&gt; network,
                        MMeasureDescription key) {
                if (measures.getNetworkMeasureObject(network, key) == null) {
                        // &lt;- LOGGING
                        logger.error(&quot;No measure defined for key &quot; + key);
                        // LOGGING -&gt;
                }
                return measures.getNetworkMeasureObject(network, key);
        }
</pre></div></div></div><div class="section"><h3>Managing Network Measures<a name="Managing_Network_Measures"></a></h3><div class="section"><h4>Basics<a name="Basics"></a></h4><p>The central class for managing network measures is <a href="../apidocs/de/cesr/more/measures/network/MNetworkMeasureManager.html"><tt>MNetworkMeasureManager</a>. To obtain an instance of the network manager call &lt;&lt;&lt;MNetworkMeasureManager.getInstance()</tt>. However, make sure to set the schedule before: <tt>MNetworkManager.setSchedule(MoreSchedule schedule)</tt>!</p></div><div class="section"><h4>Trigger measure calculation for networks<a name="Trigger_measure_calculation_for_networks"></a></h4><div class="source"><pre>MNetworkManager netMan = MNetworkManager.getInstance();
netMan.addMeasureCalculation(net, MCentralityNetMSupplier.Short.NET_CEN_DEGREE.getName());
</pre></div></div><div class="section"><h4>Setting Parameters for Network Measure Calculation<a name="Setting_Parameters_for_Network_Measure_Calculation"></a></h4><p><a href="#Setting_Parameters_for_Node_Measure_Calculation">see above</a></p></div></div><div class="section"><h3>Defining subnetworks<a name="Defining_subnetworks"></a></h3><p>MoRe supports the definition of subnetworks according to criteria that may be derived from Java object properties to calculate network measures for certain network parts, for instance. As a default, subnetworks consist of nodes that fulfill given criteria and all links of the original network between these nodes. To define a subnetwork accomplish the following steps:</p><ul><li>Define a <tt>org.apache.commons.collections15.Predicate</tt> whose <tt>evaluate(object)</tt> methods returns true for all vertices that shall be included in the subnetwork.<div class="source"><pre>MNetworkManager.storeVertexSubnetwork(network, predicate, subnetwork_name)
</pre></div><p>Network may be the name of a network already registered at the <tt>MNetworkManager</tt> or an instance of <tt>MoreNetwork</tt>.</p></li></ul></div><div class="section"><h3>Implementing Custom Measures<a name="Implementing_Custom_Measures"></a></h3><ol style="list-style-type: decimal"><li>Create a subclass of <a href="../apidocs/de/cesr/more/measures/MAbstractMeasureSupplier.html"><tt>MAbstractMeasureSupplier</tt></a>.</li><li>It is a good idea to define the measures' names as <tt>enum Short</tt>.<div class="source"><pre>public enum Short {
        YOUR_MEASURE(&quot;YourMeasureName&quot;);

        String  name;

        private Short(String name) {
                this.name = name;
        }

        public String getName() {
                return name;
        }
}
</pre></div></li><li>In the constructor, add the categories the defined measures belong to (see <a href="../apidocs/de/cesr/more/measures/MNetworkMeasureCategory.html"><tt>MNetworkMeasureCategory</tt></a>; you may also define your own <tt>MoreMeasureCategory</tt>).<div class="source"><pre>private DirectedInfoMapModularitySupplier() {
        categories.add(MNetworkMeasureCategory.NETWORK_MODULARITY);
        addMeasures();
}
</pre></div><p>A <tt>MNetworkMeasureSupplier</tt> should be implemented as singleton since it does not make sense to have more than one supplier. However, the <tt>MAbstractMeasureSupplier</tt> overrides <tt>equals()</tt> and compares regarding the class name but does not prevent subclasses from overriding its <tt>equals()</tt> method.</p></li><li>Add the measure calculation:<div class="source"><pre>private void addMeasures() {
        MMeasureDescription description = new MMeasureDescription(
                        MNetworkMeasureCategory.NETWORK_MODULARITY,
                        Short.YOUR_MEASURE.getName(),
                        &quot;Your measure description&quot;);

        measures.put(description, new MAbstractNetworkMeasure(description,
                        Double.class) {

                @Override
                public &lt;T, EdgeType extends MoreEdge&lt;? super T&gt;&gt; MoreAction getAction(
                                final MoreNetwork&lt;T, EdgeType&gt; network,
                                Map&lt;String, Object&gt; parameters) {
                        return new MAbstractAction() {

                                @Override
                                public void execute() {
                                        double value = &lt;calculate your measure here&gt;;
                                        MNetworkManager.setNetworkMeasure(
                                                        network,
                                                        new MMeasureDescription(
                                                                        Short.NET_MOD_UNDIRECTED_INFOMAP
                                                                                        .getName()), value);
                                }

                                @Override
                                public String toString() {
                                        return Short.YOUR_MEASURE.getName() + &quot;(&quot; + network.getName() + &quot;)&quot;;
                                }
                        };
                }
        });
}
</pre></div></li><li>Add your measure supplier:<div class="source"><pre>MNetworkMeasureManager.getInstance().addMeasureSupplier(
                                        YourMeasureSupplier.getInstance());
</pre></div><p>The scheduling parameters (start, interval, end) are defined in the parameter map that is interpreted by <tt>MNetworkMeasureManager</tt> or <tt>MNodeMeasureManager</tt>. Therefore, generating <tt>MoreActions</tt> does not need to define a <tt>MSchedulingParameter</tt>.</p></li></ol></div><div class="section"><h3>Defining Dynamics of Networks<a name="Defining_Dynamics_of_Networks"></a></h3><div class="section"><h4>Manipulation Agent Components<a name="Manipulation_Agent_Components"></a></h4><p>With <tt>MWeightLinksManipulateAgentComp</tt> More provides an agent component that manages the agents links according to differences between partners regarding some node property. The agents need to implement <tt>MoreNetStructureManageable</tt>. The component takes care of updating link weights and removing and establishing links if required. In case the node properties undergo a certain threshold, weights are increased. As the opposite, if properties exceed a threshold, weights get decreased. When weights fall below zero, the according links is removed and another one is established. Links removal and establishment is done by a <tt>MoreEdgeManager</tt>. See JavaDoc for more information.</p><p>In order to activate the structure manager, the component needs to be assigned to node objects:</p><div class="source"><pre>agent.netStructure = new MWeightLinksManipulateAgentComp&lt;V, MoreEdge&lt;V&gt;(agent, ModelManager.getMan().getNetwork().getName(),
                MoreNetworkEdgeModifier&lt;A, E&gt; edgeMan);
</pre></div><p>The update method then needs to be called every time links weights shall be updated:</p><div class="source"><pre>this.numDissolvedLinks = this.netStructureMan.updateLinkWeight();
</pre></div></div><div class="section"><h4>Manipulating Repast Simphony networks<a name="Manipulating_Repast_Simphony_networks"></a></h4><p>The RS networks usually deal with changes of edges in the geography via <tt>MoreGeoNetworkEdgeModifier</tt>, but do not care about adding and removing nodes to and from contexts and geographies. The reason is that these node objects are expected to survive even if they are deleted from the network.</p></div></div><div class="section"><h3>Random Numbers in MoRe<a name="Random_Numbers_in_MoRe"></a></h3><p>MoRe uses its own instance of <a class="externalLink" href="http://uranus4abm.sourceforge.net/javadoc/de/cesr/uranus/core/URandomService.html"> <tt>URandomService</tt></a>. Basically, it defines two different random number generators:</p><ul><li><tt>RND_STREAM_NETWORK_BUILDING</tt></li><li><tt>RND_STREAM_NETWORK_DYNAMICS</tt><p>By default, and when only a global random seed (<tt>RANDOM_SEED</tt>) is defined, these point to a single global random number generators (<tt>RND_STREAM</tt>). However, these streams can be fed by distinct random seeds: </p></li><li><tt>RANDOM_SEED_NETWORK_BUILDING</tt></li><li><tt>RANDOM_SEED_NETWORK_DYNAMICS</tt><p>The streams are initialised by calling </p><div class="source"><pre>MManager.init()
</pre></div><p>To influence the entire random number generation in MoRe it is sufficient to set the parameter <tt>RANDOM_SEED</tt>:</p><div class="source"><pre>PmParameterManager.setParameter(MRandomPa.RANDOM_SEED, new Integer(1));
</pre></div><p>To influence the random number generation of certain parts of MoRe change the according random number seed, e.g.:</p><div class="source"><pre>PmParameterManager.setParameter(MRandomPa.RANDOM_SEED_NETWORK_BUILDING, new Integer(2));
</pre></div><p>Furthermore, it is possible to register custom random number generators for a certain part of MoRe:</p><div class="source"><pre>MManager.getURandomService().registerGenerator((String) PmParameterManager
        .getParameter(MRandomPa.RND_STREAM_NETWORK_BUILDING), new MersenneTwister(3));
</pre></div><p>Alternatively, you may register your custom random number generator and adapt the stream name parameter accordingly. </p><p>See the <a class="externalLink" href="http://uranus4abm.sourceforge.net/">URaNuS manual</a> for further information, especially <a class="externalLink" href="http://uranus4abm.sourceforge.net/usage.html#Full_Flexibility"> Full Flexibility</a>.</p></li></ul></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">Copyright &#169;                   2014.
          All Rights Reserved.      
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
