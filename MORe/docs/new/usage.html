<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Jan 2, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>More - Managing ongoing Relationships - MoRe</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
      <meta name="author" content="Sascha Holzhauer" />
    <meta name="Date-Creation-yyyymmdd" content="20111027" />
    <meta name="Date-Revision-yyyymmdd" content="20120102" />
    <meta http-equiv="Content-Language" content="en" />
        
  </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                MoRe
                </div>
                        <a href="http://www.cesr.de" id="bannerRight">
                                                <img src="images/cesr-logo.gif" alt="$alt" />
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                
                  <div class="xright">                    <a href="http://repast.sourceforge.net/" class="externalLink" title="Repast Simphony">Repast Simphony</a>
              
                
                &nbsp;| <span id="publishDate">Last Published: 2012-01-02</span>
              &nbsp;| <span id="projectVersion">Version: 0.5.1-SNAPSHOT</span>
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                
                                <h5>MoRe</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Introduction">Introduction</a>
            </li>
                  <li class="none">
                          <a href="concept.html" title="Concept">Concept</a>
            </li>
                  <li class="none">
                          <a href="features.html" title="Features">Features</a>
            </li>
                  <li class="none">
            <strong>Usage</strong>
          </li>
                  <li class="none">
                          <a href="../apidocs/index.html" target="new" title="JavaDoc">JavaDoc</a>
            </li>
                  <li class="none">
                          <a href="faq.html" title="FAQ">FAQ</a>
            </li>
                  <li class="none">
                          <a href="xhtml/olddoc.html" title="Old Doc">Old Doc</a>
            </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>MORe Usage<a name="MORe_Usage"></a></h2><div class="section"><h3>Installation<a name="Installation"></a></h3><ul><li>Make the java code available to your custom project code</li><li>Set up a MySQL database in case You want to use it as parameter storage (see ParMa for further information) or to store network and/or node data.</li><li>For certain network and node measure calculations there is an efficient R implementation. In order to use these calculations You need to <a class="externalLink" href="http://cran.r-project.org/">install R</a> including a number of R packages. See the R-script <tt>installPackages4More.R</tt> in the folder <tt>config/r</tt> for instructions.</li></ul></div><div class="section"><h3>Quick Start for Repast Simphony models<a name="Quick_Start_for_Repast_Simphony_models"></a></h3><p>Adapt and call the following method from your <tt>build(context)</tt> method after initialisation of agents:</p><div class="source"><pre>// Define your social context if it is not the main context
Context&lt;YourAgent&gt; socialContext = context.getSubContext(socialContextId);

// Instantiate your edge factory in case you want to use custom edge objects.
// Otherwise, use MRepastEdge&lt;AgentType&gt; as edge type parameter and use new MRsEdgeFactory&lt;AgentType, MRepastEdge&lt;AgentType&gt;() 
MRsEdgeFactory&lt;YourAgent, YourEdge&gt; eFac = new YourEdgeFactory();

MoreRsNetworkBuilder&lt;YourAgent, YourEdge&gt; networkBuilder = new MGeoRsWattsBetaSwBuilder(eFac,
                        socialNetworkName);
MoreRsNetwork&lt;YourAgent, YourEdge&gt; network = networkBuilder.buildNetwork(agents);
socialContext.addProjection(network);

// init More
MManager.init();
MManager.setSchedule(new MRsSchedule(RunEnvironment.getInstance().getCurrentSchedule()));
// Register network at MoRe
MNetworkManager.setNetwork(network, socialNetworkName);
</pre></div></div><div class="section"><h3>Initialising MoRe<a name="Initialising_MoRe"></a></h3><p>Consider the following steps to initialise MoRe properly:</p><ul><li>Copy Your custom parameter data to the MoRe equivalents. To get an overview of used parameters in MoRe, consult the <a href="../apidocs/index.html">JavaDoc</a> and see package <tt>de.cesr.more.params</tt> for descriptions of parameters. More only defines default values in these enumerations. Further parameter retrieval must be issued in the user code. For details, see the ParMa manual <i>insert link</i>. Consider especially:<ul><li><tt>MSyQLPa</tt> for database setting relevant for storing network and node data</li><li>Parameters for network builders, e.g. <tt>MNetBuildBhPa</tt> for <tt>MBaselineDhhRadiusNetworkBuilder</tt></li><li>Random seeds</li></ul></li><li>Call <tt>MManager.init()</tt> to initialise default random streams (according to parameter settings for random seeds).</li></ul></div><div class="section"><h3>Configuring Network Measures<a name="Configuring_Network_Measures"></a></h3><div class="section"><h4>Adding Measure Definitions<a name="Adding_Measure_Definitions"></a></h4><p>As default, the <tt>MNetworkMeasureManager</tt> imports measure definitions from <tt>MBasicNetworkMeasureSupplier</tt> (see JavaDoc for details). Further measure definitions are added by passing an instance of <tt>MoreMeasureSupplier</tt> to <tt>MNetworkMeasureManager#addMeasureSupplier(supplier)</tt>. See Implementing Custom Measures <i>insert link</i> for further instructions.</p></div></div><div class="section"><h3>Managing Node Measures<a name="Managing_Node_Measures"></a></h3><div class="section"><h4>Basics<a name="Basics"></a></h4><p>The central class for managing node measures is <a href="../apidocs/de/cesr/more/measures/node/MNodeMeasureManager.html"><tt>MNodeMeasureManager</a>. To obtain an instance of the node measure manager call &lt;&lt;&lt;MNodeMeasureManager.getInstance()</tt>. However, make sure to set the schedule before:</p><div class="source"><pre>MNetworkManager.setSchedule(MoreSchedule schedule)
</pre></div><p>To use the Repast Simphony schedule (adapter from RS's <tt>ISchedule</tt> to <tt>MoreSchudule</tt>) call</p><div class="source"><pre>MNetworkMeasureManager.setSchedule(new MRsSchedule(RunEnvironment.getInstance().getCurrentSchedule()));
</pre></div></div><div class="section"><h4>Setting Parameters for Node Measure Calculation<a name="Setting_Parameters_for_Node_Measure_Calculation"></a></h4><p>Every MoreMeasure has a parameter map. The map contains key - (default)value pairs of parameters. the user may walk through the map and alter parameter values to adjust measure calculations. For instance, to set scheduling parameters: </p><div class="source"><pre>// set scheduling parameters:
Map &lt; String , Object &gt; params = new HashMap &lt; String , Object &gt;();
params.put(MNetworkMeasureManager.ParameterKeys.START.name(), new Integer(1));
int interval = (Integer) PmParameterManager.getParameter(SocNetPa.ANALYSE_NETWORKS_INTERVAL);
params.put(MNetworkMeasureManager.ParameterKeys.INTERVAL.name(), new Integer(interval));
params.put(MNetworkMeasureManager.ParameterKeys.END.name(), MScheduleParameters.END_TICK);
params.put(MNetworkMeasureManager.ParameterKeys.PRIORITY.name(), MScheduleParameters.FIRST_PRIORITY);
</pre></div><p>NOTE: It is not guaranteed that a MoreMeasure provides a non-empty map!</p></div><div class="section"><h4>Define parameters and trigger measure calculation for nodes<a name="Define_parameters_and_trigger_measure_calculation_for_nodes"></a></h4><div class="source"><pre>// add measures for overall network:
MNetworkMeasureManager.getInstance().addMeasureCalculation(ModelManager.SOCNET_NAME,
                MNetworkStatisticsSupplier.Short.N_STAT_AVGPATH.getName(), params);     
</pre></div></div></div><div class="section"><h3>Managing Network Measures<a name="Managing_Network_Measures"></a></h3><div class="section"><h4>Basics<a name="Basics"></a></h4><p>The central class for managing network measures is <a href="../apidocs/de/cesr/more/measures/network/MNetworkMeasureManager.html"><tt>MNetworkMeasureManager</a>. To obtain an instance of the network manager call &lt;&lt;&lt;MNetworkMeasureManager.getInstance()</tt>. However, make sure to set the schedule before: <tt>MNetworkManager.setSchedule(MoreSchedule schedule)</tt>!</p></div><div class="section"><h4>Trigger measure calculation for networks<a name="Trigger_measure_calculation_for_networks"></a></h4><div class="source"><pre>MNetworkManager netMan = MNetworkManager.getInstance();
netMan.addMeasureCalculation(net, MCentralityNetMSupplier.Short.NET_CEN_DEGREE.getName());
</pre></div></div><div class="section"><h4>Setting Parameters for Network Measure Calculation see above<a name="Setting_Parameters_for_Network_Measure_Calculation_see_above"></a></h4></div></div><div class="section"><h3>Defining subnetworks<a name="Defining_subnetworks"></a></h3><p>MoRe supports the definition of subnetworks according to criteria that may be derived from Java object properties to calculate network measures for certain network parts, for instance. As a default, subnetworks consist of nodes that fulfill given criteria and all links of the original network between these nodes. To define a subnetwork accomplish the following steps:</p><ul><li>Define a <tt>org.apache.commons.collections15.Predicate</tt> whose <tt>evaluate(object)</tt> methods returns true for all vertices that shall be included in the subnetwork.<div class="source"><pre>MNetworkManager.storeVertexSubnetwork(network, predicate, subnetwork_name)
</pre></div><p>Network may be the name of a network already registered at the <tt>MNetworkManager</tt> or an instance of <tt>MoreNetwork</tt>.</p></li></ul></div><div class="section"><h3>Implementing Custom Measures<a name="Implementing_Custom_Measures"></a></h3><p>A <tt>MNetworkMeasureSupplier</tt> should be implemented as singleton since it does not make sense to have more than one supplier. However, the <tt>MAbstractMeasureSupplier</tt> overrides <tt>equals()</tt> and compares regarding the class name but does not prevent subclasses from overriding its <tt>equals()</tt> method.</p><p>The scheduling parameters (start, interval, end) are defined in the parameter map that is interpreted by <tt>MNetworkMeasureManager</tt> or <tt>MNodeMeasureManager</tt>. Therefore, generating <tt>MoreActions</tt> do not need to define a <tt>MSchedulingParameter</tt>.</p></div><div class="section"><h3>Defining Dynamics of Networks<a name="Defining_Dynamics_of_Networks"></a></h3><div class="section"><h4>Manipulation Agent Components<a name="Manipulation_Agent_Components"></a></h4><p>With <tt>MWeightLinksManipulateAgentComp</tt> More provides an agent component that manages the agents links according to differences between partners regarding some node property. The agents need to implement <tt>MoreNetStructureManageable</tt>. The component takes care of updating link weights and removing and establishing links if required. In case the node properties undergo a certain threshold, weights are increased. As the opposite, if properties exceed a threshold, weights get decreased. When weights fall below zero, the according links is removed and another one is established. Links removal and establishment is done by a <tt>MoreEdgeManager</tt>. See JavaDoc for more information.</p><p>In order to activate the structure manager, the component needs to be assigned to node objects:</p><div class="source"><pre>agent.netStructure = new MWeightLinksManipulateAgentComp&lt;V, MoreEdge&lt;V&gt;(agent, ModelManager.getMan().getNetwork().getName(),
                MoreNetworkEdgeModifier&lt;A, E&gt; edgeMan);
</pre></div><p>The update method then needs to be called every time links weights shall be updated:</p><div class="source"><pre>this.numDissolvedLinks = this.netStructureMan.updateLinkWeight();
</pre></div></div><div class="section"><h4>Manipulating Repast Simphony networks<a name="Manipulating_Repast_Simphony_networks"></a></h4><p>The RS networks usually deal with changes of edges in the geography via <tt>MoreGeoNetworkEdgeModifier</tt>, but do not care about adding and removing nodes to and from contexts and geographies. The reason is that these node objects are expected to survive even if they are deleted from the network.</p></div></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">Copyright &#169;                   2012.
          All Rights Reserved.      
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
